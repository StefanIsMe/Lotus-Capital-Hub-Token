<!-- HTML -->
<script async src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.5.2/web3.min.js"></script>
<div style="margin-top: 10px;">
    <!-- Connection Status -->
	<p id="statusField" style="font-size: 16px; color: white;">The website is currently loading. Please wait a moment before you can begin using the available functions.</p>
    <p id="switchingStatus" style="font-size: 16px; color: white;"></p>
</div>

<div style="margin-top: 20px;">
    <!-- Step 1: Connect to BSC Test Net -->
    <h2>Step 1: Connect to BSC Test Net</h2>
    <p>Click the button below to connect to the BSC Test Net.</p>
    <button id="connectBscButton" style="background-color: white; font-size: 30px; color: grey;" onclick="connectToBsc()" disabled>Connect to BSC Test Net</button>
</div>

<div style="margin-top: 20px;">
    <!-- Step 2: Connect to MetaMask -->
    <h2>Step 2: Connect to MetaMask</h2>
    <p>Click the button below to connect your MetaMask wallet.</p>
    <button id="connectButton" style="background-color: white; font-size: 30px; color: grey;" onclick="toggleConnection()" disabled>Connect to MetaMask</button>
</div>

<div style="margin-top: 20px;">
    <!-- Step 3: Approve Spend -->
    <h2>Step 3: Approve Spend</h2>
    <p>After connecting, you'll need to approve the spend.</p>
    <label for="tokenAmountInput">Enter the amount of tokens to spend:</label>
    <input type="text" id="tokenAmountInput" style="font-size: 16px; width: 180px;" placeholder="Enter amount" required><br>
    <button id="approveButton" style="background-color: white; font-size: 30px; color: grey;" onclick="approveSpend()" disabled>Approve Spend</button>
</div>

<script>
    // Add event listener to input field
    const tokenAmountInput = document.getElementById('tokenAmountInput');
    tokenAmountInput.addEventListener('input', formatInputValue);

    // Function to format input value with commas
    function formatInputValue() {
        const inputValue = tokenAmountInput.value.replace(/,/g, ''); // Remove existing commas
        const formattedValue = numberWithCommas(inputValue);
        tokenAmountInput.value = formattedValue;
    }

    // Function to add commas to numbers
    function numberWithCommas(number) {
        return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    }
</script>

<div style="margin-top: 20px;">
    <!-- Step 4: Complete SendFrom -->
    <h2>Step 5: Complete SendFrom</h2>
    <p>Once approved, complete the sendFrom action.</p>
    <button id="sendFromButton" style="background-color: white; font-size: 30px; color: grey;" onclick="sendFrom()" disabled>Complete sendFrom</button>
</div>

<script>
    window.addEventListener('load', async function () {
        const connectBscButton = document.getElementById('connectBscButton'); // Corrected variable name
        const statusField = document.getElementById('statusField'); // Get the statusField element

        connectBscButton.removeAttribute('disabled');
        connectBscButton.style.color = 'black';

        console.log('Website loaded. Enabling network connect button...');

        // Update the statusField to indicate that the website is loaded
        statusField.textContent = "The website is now loaded. You can begin at Step 1.";

    });
</script>

<script>
    <!-- Step 1: Connect to BSC Test Net -->
    async function connectToBsc() {
        const statusField = document.getElementById('statusField');
        const connectBscButton = document.getElementById('connectBscButton'); // Get the connectBscButton element
        const connectButton = document.getElementById('connectButton'); // Get the connectButton element
        
        try {
            // Check the current chain ID
            const currentChainId = await ethereum.request({ method: 'eth_chainId' });

            console.log('Current chain ID:', currentChainId);

            if (currentChainId !== '0x61') {
                console.log('Switching to BSC Test Net...');

                // Prompt user to switch to the BSC Test Net
                await ethereum.request({
                    method: 'wallet_addEthereumChain',
                    params: [
                        {
                            chainId: '0x61', // BSC Testnet chain ID
                            chainName: 'BSC Testnet',
                            nativeCurrency: {
                                name: 'tBNB',
                                symbol: 'tBNB',
                                decimals: 18,
                            },
                            rpcUrls: ['https://bsc-testnet.publicnode.com'],
                            blockExplorerUrls: ['https://testnet.bscscan.com'],
                        },
                    ],
                });

                // Check the chain ID again after the user switches networks
                const updatedChainId = await ethereum.request({ method: 'eth_chainId' });

                if (updatedChainId === '0x61') {
                    // Network switch successful
                    console.log('Switched to BSC Test Net.');
                    statusField.textContent = "Connected to BSC Test Net. You can now proceed to Step 2.";
                    
                    // Disable connectBscButton and enable connectButton
                    connectBscButton.disabled = true;
                    connectBscButton.style.color = 'grey';
                    connectButton.removeAttribute('disabled');
                    connectButton.style.color = 'black';
                } else {
                    // Network switch was canceled
                    console.log('Network switch canceled.');
                    statusField.textContent = "Network switch canceled. Please refresh the page.";
                }
            } else {
                // Already connected to BSC Test Net
                console.log('Already connected to BSC Test Net.');
                statusField.textContent = "Connected to BSC Test Net. You can now proceed to Step 2.";

                // Disable connectBscButton and enable connectButton
                connectBscButton.disabled = true;
                connectBscButton.style.color = 'grey';
                connectButton.removeAttribute('disabled');
                connectButton.style.color = 'black';
            }
        } catch (error) {
            console.error('Error checking or switching network:', error);
            showError("An error occurred while checking or switching the network. Please try again.");
        }
    }
</script>

<script>
	<!-- Step 2: Connect to MetaMask -->
    async function toggleConnection() {
        if (typeof window.ethereum !== 'undefined') {
            try {
                const accounts = await ethereum.request({ method: 'eth_accounts' });

                if (accounts.length === 0) {
                    console.log('Connecting to MetaMask...');
                    const connectedAccounts = await ethereum.request({ method: 'eth_requestAccounts' });

                    const userAddress = connectedAccounts[0]; // Get user address from connected accounts
                    console.log('Connected to MetaMask. User Address:', userAddress);

                    document.getElementById('statusField').textContent = 'Connected to MetaMask. User Address: ' + userAddress + '. Proceed to step 3.';
                    document.getElementById('connectButton').style.color = 'grey'; // Set font text color to grey
                    document.getElementById('connectButton').disabled = true;
                    
                    // Enable and style approveButton
                    const approveButton = document.getElementById('approveButton');
                    approveButton.removeAttribute('disabled');
                    approveButton.style.color = 'black'; // Set font text color to black
                } else {
                    const userAddress = accounts[0]; // Get user address from existing accounts
                    console.log('Already connected to MetaMask. User Address:', userAddress);

                    document.getElementById('statusField').textContent = 'Connected to MetaMask. User Address: ' + userAddress + '. Proceed to step 3.';
                    document.getElementById('connectButton').style.color = 'grey'; // Set font text color to grey
                    document.getElementById('connectButton').disabled = true;
                    
                    // Enable and style approveButton
                    const approveButton = document.getElementById('approveButton');
                    approveButton.removeAttribute('disabled');
                    approveButton.style.color = 'black'; // Set font text color to black
                }
            } catch (error) {
                console.error('Error connecting to MetaMask:', error);
                const errorMessage = getErrorMessage(error);
                document.getElementById('statusField').textContent = 'Error: ' + errorMessage;
            }
        } else {
            showError('MetaMask is not available. Please install MetaMask.');
        }
    }

    function getErrorMessage(error) {
        if (error.code === 4001) {
            return 'User rejected the connection request.';
        }
        return 'An unknown error occurred. Please try again.';
    }
</script>


<script>
	<!-- Step 3: Approve Spend -->
  	async function approveSpend() {
    try {
      if (typeof window.ethereum === 'undefined') {
        throw new Error('MetaMask is not available. Please install MetaMask.');
      }

      const contractAddress = '0x552f9B7EB8951C138d5B23C785A405C1602A9589';
      const contractAbi = [
	{
		"inputs": [],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Approval",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "approve",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "subtractedValue",
				"type": "uint256"
			}
		],
		"name": "decreaseAllowance",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "addedValue",
				"type": "uint256"
			}
		],
		"name": "increaseAllowance",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "transfer",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Transfer",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "transferFrom",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			}
		],
		"name": "allowance",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "account",
				"type": "address"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "decimals",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "symbol",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "totalSupply",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
];

      // Use the latest version of web3 with the "eth.Contract" method
      const web3 = new Web3(window.ethereum);
      const contract = new web3.eth.Contract(contractAbi, contractAddress);

      const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
      const userAddress = accounts[0];
      const spender = '0xA1894b6d732B898dD44382f352aF0Ccc75CfAA58';
      const amount = '1000000000000000000';

      const transaction = await contract.methods.approve(spender, amount).send({ from: userAddress });

      console.log('Transaction receipt:', transaction);

      // Transaction was successful, you can update the UI or show a success message here
    } catch (error) {
      console.error('Transaction error:', error);
      showError('Transaction error. Please try again.');
    }
  }
</script>

<script>
<!-- Step 4: Complete SendFrom -->
async function sendFrom() {
    try {
      if (typeof window.ethereum === 'undefined') {
        throw new Error('MetaMask is not available. Please install MetaMask.');
      }

      const contractAddress = '0xA1894b6d732B898dD44382f352aF0Ccc75CfAA58';
      const contractAbi = [
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "_token",
				"type": "address"
			},
			{
				"internalType": "uint8",
				"name": "_sharedDecimals",
				"type": "uint8"
			},
			{
				"internalType": "address",
				"name": "_lzEndpoint",
				"type": "address"
			}
		],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "uint16",
				"name": "_srcChainId",
				"type": "uint16"
			},
			{
				"indexed": false,
				"internalType": "bytes",
				"name": "_srcAddress",
				"type": "bytes"
			},
			{
				"indexed": false,
				"internalType": "uint64",
				"name": "_nonce",
				"type": "uint64"
			},
			{
				"indexed": false,
				"internalType": "bytes32",
				"name": "_hash",
				"type": "bytes32"
			}
		],
		"name": "CallOFTReceivedSuccess",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_srcChainId",
				"type": "uint16"
			},
			{
				"internalType": "bytes",
				"name": "_srcAddress",
				"type": "bytes"
			},
			{
				"internalType": "uint64",
				"name": "_nonce",
				"type": "uint64"
			},
			{
				"internalType": "bytes32",
				"name": "_from",
				"type": "bytes32"
			},
			{
				"internalType": "address",
				"name": "_to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "_amount",
				"type": "uint256"
			},
			{
				"internalType": "bytes",
				"name": "_payload",
				"type": "bytes"
			},
			{
				"internalType": "uint256",
				"name": "_gasForCall",
				"type": "uint256"
			}
		],
		"name": "callOnOFTReceived",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_srcChainId",
				"type": "uint16"
			},
			{
				"internalType": "bytes",
				"name": "_srcAddress",
				"type": "bytes"
			}
		],
		"name": "forceResumeReceive",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_srcChainId",
				"type": "uint16"
			},
			{
				"internalType": "bytes",
				"name": "_srcAddress",
				"type": "bytes"
			},
			{
				"internalType": "uint64",
				"name": "_nonce",
				"type": "uint64"
			},
			{
				"internalType": "bytes",
				"name": "_payload",
				"type": "bytes"
			}
		],
		"name": "lzReceive",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "uint16",
				"name": "_srcChainId",
				"type": "uint16"
			},
			{
				"indexed": false,
				"internalType": "bytes",
				"name": "_srcAddress",
				"type": "bytes"
			},
			{
				"indexed": false,
				"internalType": "uint64",
				"name": "_nonce",
				"type": "uint64"
			},
			{
				"indexed": false,
				"internalType": "bytes",
				"name": "_payload",
				"type": "bytes"
			},
			{
				"indexed": false,
				"internalType": "bytes",
				"name": "_reason",
				"type": "bytes"
			}
		],
		"name": "MessageFailed",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_srcChainId",
				"type": "uint16"
			},
			{
				"internalType": "bytes",
				"name": "_srcAddress",
				"type": "bytes"
			},
			{
				"internalType": "uint64",
				"name": "_nonce",
				"type": "uint64"
			},
			{
				"internalType": "bytes",
				"name": "_payload",
				"type": "bytes"
			}
		],
		"name": "nonblockingLzReceive",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "address",
				"name": "_address",
				"type": "address"
			}
		],
		"name": "NonContractAddress",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "previousOwner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "newOwner",
				"type": "address"
			}
		],
		"name": "OwnershipTransferred",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "uint16",
				"name": "_srcChainId",
				"type": "uint16"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "_to",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "_amount",
				"type": "uint256"
			}
		],
		"name": "ReceiveFromChain",
		"type": "event"
	},
	{
		"inputs": [],
		"name": "renounceOwnership",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_srcChainId",
				"type": "uint16"
			},
			{
				"internalType": "bytes",
				"name": "_srcAddress",
				"type": "bytes"
			},
			{
				"internalType": "uint64",
				"name": "_nonce",
				"type": "uint64"
			},
			{
				"internalType": "bytes",
				"name": "_payload",
				"type": "bytes"
			}
		],
		"name": "retryMessage",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "uint16",
				"name": "_srcChainId",
				"type": "uint16"
			},
			{
				"indexed": false,
				"internalType": "bytes",
				"name": "_srcAddress",
				"type": "bytes"
			},
			{
				"indexed": false,
				"internalType": "uint64",
				"name": "_nonce",
				"type": "uint64"
			},
			{
				"indexed": false,
				"internalType": "bytes32",
				"name": "_payloadHash",
				"type": "bytes32"
			}
		],
		"name": "RetryMessageSuccess",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "_from",
				"type": "address"
			},
			{
				"internalType": "uint16",
				"name": "_dstChainId",
				"type": "uint16"
			},
			{
				"internalType": "bytes32",
				"name": "_toAddress",
				"type": "bytes32"
			},
			{
				"internalType": "uint256",
				"name": "_amount",
				"type": "uint256"
			},
			{
				"internalType": "bytes",
				"name": "_payload",
				"type": "bytes"
			},
			{
				"internalType": "uint64",
				"name": "_dstGasForCall",
				"type": "uint64"
			},
			{
				"components": [
					{
						"internalType": "address payable",
						"name": "refundAddress",
						"type": "address"
					},
					{
						"internalType": "address",
						"name": "zroPaymentAddress",
						"type": "address"
					},
					{
						"internalType": "bytes",
						"name": "adapterParams",
						"type": "bytes"
					}
				],
				"internalType": "struct ICommonOFT.LzCallParams",
				"name": "_callParams",
				"type": "tuple"
			}
		],
		"name": "sendAndCall",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "_from",
				"type": "address"
			},
			{
				"internalType": "uint16",
				"name": "_dstChainId",
				"type": "uint16"
			},
			{
				"internalType": "bytes32",
				"name": "_toAddress",
				"type": "bytes32"
			},
			{
				"internalType": "uint256",
				"name": "_amount",
				"type": "uint256"
			},
			{
				"components": [
					{
						"internalType": "address payable",
						"name": "refundAddress",
						"type": "address"
					},
					{
						"internalType": "address",
						"name": "zroPaymentAddress",
						"type": "address"
					},
					{
						"internalType": "bytes",
						"name": "adapterParams",
						"type": "bytes"
					}
				],
				"internalType": "struct ICommonOFT.LzCallParams",
				"name": "_callParams",
				"type": "tuple"
			}
		],
		"name": "sendFrom",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "uint16",
				"name": "_dstChainId",
				"type": "uint16"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "_from",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "bytes32",
				"name": "_toAddress",
				"type": "bytes32"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "_amount",
				"type": "uint256"
			}
		],
		"name": "SendToChain",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_version",
				"type": "uint16"
			},
			{
				"internalType": "uint16",
				"name": "_chainId",
				"type": "uint16"
			},
			{
				"internalType": "uint256",
				"name": "_configType",
				"type": "uint256"
			},
			{
				"internalType": "bytes",
				"name": "_config",
				"type": "bytes"
			}
		],
		"name": "setConfig",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_dstChainId",
				"type": "uint16"
			},
			{
				"internalType": "uint16",
				"name": "_packetType",
				"type": "uint16"
			},
			{
				"internalType": "uint256",
				"name": "_minGas",
				"type": "uint256"
			}
		],
		"name": "setMinDstGas",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "uint16",
				"name": "_dstChainId",
				"type": "uint16"
			},
			{
				"indexed": false,
				"internalType": "uint16",
				"name": "_type",
				"type": "uint16"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "_minDstGas",
				"type": "uint256"
			}
		],
		"name": "SetMinDstGas",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_dstChainId",
				"type": "uint16"
			},
			{
				"internalType": "uint256",
				"name": "_size",
				"type": "uint256"
			}
		],
		"name": "setPayloadSizeLimit",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "_precrime",
				"type": "address"
			}
		],
		"name": "setPrecrime",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "address",
				"name": "precrime",
				"type": "address"
			}
		],
		"name": "SetPrecrime",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_version",
				"type": "uint16"
			}
		],
		"name": "setReceiveVersion",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_version",
				"type": "uint16"
			}
		],
		"name": "setSendVersion",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_remoteChainId",
				"type": "uint16"
			},
			{
				"internalType": "bytes",
				"name": "_path",
				"type": "bytes"
			}
		],
		"name": "setTrustedRemote",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "uint16",
				"name": "_remoteChainId",
				"type": "uint16"
			},
			{
				"indexed": false,
				"internalType": "bytes",
				"name": "_path",
				"type": "bytes"
			}
		],
		"name": "SetTrustedRemote",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_remoteChainId",
				"type": "uint16"
			},
			{
				"internalType": "bytes",
				"name": "_remoteAddress",
				"type": "bytes"
			}
		],
		"name": "setTrustedRemoteAddress",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "uint16",
				"name": "_remoteChainId",
				"type": "uint16"
			},
			{
				"indexed": false,
				"internalType": "bytes",
				"name": "_remoteAddress",
				"type": "bytes"
			}
		],
		"name": "SetTrustedRemoteAddress",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "bool",
				"name": "_useCustomAdapterParams",
				"type": "bool"
			}
		],
		"name": "setUseCustomAdapterParams",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "bool",
				"name": "_useCustomAdapterParams",
				"type": "bool"
			}
		],
		"name": "SetUseCustomAdapterParams",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "newOwner",
				"type": "address"
			}
		],
		"name": "transferOwnership",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "circulatingSupply",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "",
				"type": "uint16"
			},
			{
				"internalType": "bytes",
				"name": "",
				"type": "bytes"
			},
			{
				"internalType": "uint64",
				"name": "",
				"type": "uint64"
			}
		],
		"name": "creditedPackets",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "DEFAULT_PAYLOAD_SIZE_LIMIT",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_dstChainId",
				"type": "uint16"
			},
			{
				"internalType": "bytes32",
				"name": "_toAddress",
				"type": "bytes32"
			},
			{
				"internalType": "uint256",
				"name": "_amount",
				"type": "uint256"
			},
			{
				"internalType": "bytes",
				"name": "_payload",
				"type": "bytes"
			},
			{
				"internalType": "uint64",
				"name": "_dstGasForCall",
				"type": "uint64"
			},
			{
				"internalType": "bool",
				"name": "_useZro",
				"type": "bool"
			},
			{
				"internalType": "bytes",
				"name": "_adapterParams",
				"type": "bytes"
			}
		],
		"name": "estimateSendAndCallFee",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "nativeFee",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "zroFee",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_dstChainId",
				"type": "uint16"
			},
			{
				"internalType": "bytes32",
				"name": "_toAddress",
				"type": "bytes32"
			},
			{
				"internalType": "uint256",
				"name": "_amount",
				"type": "uint256"
			},
			{
				"internalType": "bool",
				"name": "_useZro",
				"type": "bool"
			},
			{
				"internalType": "bytes",
				"name": "_adapterParams",
				"type": "bytes"
			}
		],
		"name": "estimateSendFee",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "nativeFee",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "zroFee",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "",
				"type": "uint16"
			},
			{
				"internalType": "bytes",
				"name": "",
				"type": "bytes"
			},
			{
				"internalType": "uint64",
				"name": "",
				"type": "uint64"
			}
		],
		"name": "failedMessages",
		"outputs": [
			{
				"internalType": "bytes32",
				"name": "",
				"type": "bytes32"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_version",
				"type": "uint16"
			},
			{
				"internalType": "uint16",
				"name": "_chainId",
				"type": "uint16"
			},
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "_configType",
				"type": "uint256"
			}
		],
		"name": "getConfig",
		"outputs": [
			{
				"internalType": "bytes",
				"name": "",
				"type": "bytes"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_remoteChainId",
				"type": "uint16"
			}
		],
		"name": "getTrustedRemoteAddress",
		"outputs": [
			{
				"internalType": "bytes",
				"name": "",
				"type": "bytes"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "_srcChainId",
				"type": "uint16"
			},
			{
				"internalType": "bytes",
				"name": "_srcAddress",
				"type": "bytes"
			}
		],
		"name": "isTrustedRemote",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "lzEndpoint",
		"outputs": [
			{
				"internalType": "contract ILayerZeroEndpoint",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "",
				"type": "uint16"
			},
			{
				"internalType": "uint16",
				"name": "",
				"type": "uint16"
			}
		],
		"name": "minDstGasLookup",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "NO_EXTRA_GAS",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "outboundAmount",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "owner",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "",
				"type": "uint16"
			}
		],
		"name": "payloadSizeLimitLookup",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "precrime",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "PT_SEND",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "PT_SEND_AND_CALL",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "sharedDecimals",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "bytes4",
				"name": "interfaceId",
				"type": "bytes4"
			}
		],
		"name": "supportsInterface",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "token",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint16",
				"name": "",
				"type": "uint16"
			}
		],
		"name": "trustedRemoteLookup",
		"outputs": [
			{
				"internalType": "bytes",
				"name": "",
				"type": "bytes"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "useCustomAdapterParams",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
];

      // Use the latest version of web3 with the "eth.Contract" method
      const web3 = new Web3(window.ethereum);
      const contract = new web3.eth.Contract(contractAbi, contractAddress);

      const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
      const userAddress = accounts[0];

      const _from = '0xF6FC628ED131D72f346cA7223df83C7617d6C820';
      const _dstChainId = '10158';
      const _toAddress = '0x000000000000000000000000F6FC628ED131D72f346cA7223df83C7617d6C820';
      const _amount = '1000000000000000000';
      const _callParams = [
        '0xF6FC628ED131D72f346cA7223df83C7617d6C820',
        '0x0000000000000000000000000000000000000000',
        '0x000100000000000000000000000000000000000000000000000000000000000927C0',
      ];

      const gasLimit = '3000000';
      const gasPriceGwei = '5';
      const gasPriceWei = web3.utils.toWei(gasPriceGwei, 'gwei');

      const transaction = await contract.methods
        .sendFrom(_from, _dstChainId, _toAddress, _amount, _callParams)
        .send({ from: userAddress, gas: gasLimit, gasPrice: gasPriceWei, value: web3.utils.toWei('0.0013', 'ether') });

      console.log('Transaction receipt:', transaction);

      // Transaction was successful, you can update the UI or show a success message here
    } catch (error) {
      console.error('Transaction error:', error);
      showError('Transaction error. Please try again.');
    }
  }

  function showError(message) {
    alert(message);
  }
</script>