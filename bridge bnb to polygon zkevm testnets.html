<!-- HTML -->
<script async src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.5.2/web3.min.js"></script>
<script async src="https://cdn.ethers.io/lib/ethers-5.4.umd.min.js"></script>
<div style="margin-top: 10px;">
    <!-- Connection Status -->
	<p id="statusField" style="font-size: 16px; color: white;">The website is currently loading. Please wait a moment before you can begin using the available functions.</p>
    <p id="switchingStatus" style="font-size: 16px; color: white;"></p>
</div>

<div style="margin-top: 20px;">
    <!-- Step 1: Connect to BSC Test Net -->
    <h2>Step 1: Connect to BSC Test Net</h2>
    <p>Click the button below to connect to the BSC Test Net.</p>
    <button id="connectBscButton" style="background-color: white; font-size: 30px; color: grey;" onclick="connectToBsc()" disabled>Connect to BSC Test Net</button>
</div>

<script defer>
    <!-- Step 1: Connect to BSC Test Net -->
    async function connectToBsc() {
        const statusField = document.getElementById('statusField');
        const connectBscButton = document.getElementById('connectBscButton'); // Get the connectBscButton element
        const connectButton = document.getElementById('connectButton'); // Get the connectButton element
        
        try {
            // Check the current chain ID
            const currentChainId = await ethereum.request({ method: 'eth_chainId' });

            console.log('Current chain ID:', currentChainId);

            if (currentChainId !== '0x61') {
                console.log('Switching to BSC Test Net...');

                // Prompt user to switch to the BSC Test Net
                await ethereum.request({
                    method: 'wallet_addEthereumChain',
                    params: [
                        {
                            chainId: '0x61', // BSC Testnet chain ID
                            chainName: 'BSC Testnet',
                            nativeCurrency: {
                                name: 'tBNB',
                                symbol: 'tBNB',
                                decimals: 18,
                            },
                            rpcUrls: ['https://bsc-testnet.publicnode.com'],
                            blockExplorerUrls: ['https://testnet.bscscan.com'],
                        },
                    ],
                });

                // Check the chain ID again after the user switches networks
                const updatedChainId = await ethereum.request({ method: 'eth_chainId' });

                if (updatedChainId === '0x61') {
                    // Network switch successful
                    console.log('Switched to BSC Test Net.');
                    statusField.textContent = "Connected to BSC Test Net. You can now proceed to Step 2.";
                    
                    // Disable connectBscButton and enable connectButton
                    connectBscButton.disabled = true;
                    connectBscButton.style.color = 'grey';
                    connectButton.removeAttribute('disabled');
                    connectButton.style.color = 'black';
                } else {
                    // Network switch was canceled
                    console.log('Network switch canceled.');
                    statusField.textContent = "Network switch canceled. Please refresh the page.";
                }
            } else {
                // Already connected to BSC Test Net
                console.log('Already connected to BSC Test Net.');
                statusField.textContent = "Connected to BSC Test Net. You can now proceed to Step 2.";

                // Disable connectBscButton and enable connectButton
                connectBscButton.disabled = true;
                connectBscButton.style.color = 'grey';
                connectButton.removeAttribute('disabled');
                connectButton.style.color = 'black';
            }
        } catch (error) {
            console.error('Error checking or switching network:', error);
            showError("An error occurred while checking or switching the network. Please try again.");
        }
    }
	</script>



<div style="margin-top: 20px;">
    <!-- Step 2: Connect to MetaMask -->
    <h2>Step 2: Connect to MetaMask</h2>
    <p>Click the button below to connect your MetaMask wallet.</p>
    <button id="connectButton" style="background-color: white; font-size: 30px; color: grey;" onclick="toggleConnection()" disabled>Connect to MetaMask</button>
</div>

<script defer>
	<!-- Step 2: Connect to MetaMask -->
    async function toggleConnection() {
        if (typeof window.ethereum !== 'undefined') {
            try {
                const accounts = await ethereum.request({ method: 'eth_accounts' });

                if (accounts.length === 0) {
                    console.log('Connecting to MetaMask...');
                    const connectedAccounts = await ethereum.request({ method: 'eth_requestAccounts' });

                    const userAddress = connectedAccounts[0]; // Get user address from connected accounts
                    console.log('Connected to MetaMask. User Address:', userAddress);

                    document.getElementById('statusField').textContent = 'Connected to MetaMask. User Address: ' + userAddress + '. Proceed to step 3.';
                    document.getElementById('connectButton').style.color = 'grey'; // Set font text color to grey
                    document.getElementById('connectButton').disabled = true;
                    
                    // Enable and style approveButton
                    const approveButton = document.getElementById('approveButton');
                    approveButton.removeAttribute('disabled');
                    approveButton.style.color = 'black'; // Set font text color to black
                } else {
                    const userAddress = accounts[0]; // Get user address from existing accounts
                    console.log('Already connected to MetaMask. User Address:', userAddress);

                    document.getElementById('statusField').textContent = 'Connected to MetaMask. User Address: ' + userAddress + '. Proceed to step 3.';
                    document.getElementById('connectButton').style.color = 'grey'; // Set font text color to grey
                    document.getElementById('connectButton').disabled = true;
                    
                    // Enable and style approveButton
                    const approveButton = document.getElementById('approveButton');
                    approveButton.removeAttribute('disabled');
                    approveButton.style.color = 'black'; // Set font text color to black
                }
            } catch (error) {
                console.error('Error connecting to MetaMask:', error);
                const errorMessage = getErrorMessage(error);
                document.getElementById('statusField').textContent = 'Error: ' + errorMessage;
            }
        } else {
            showError('MetaMask is not available. Please install MetaMask.');
        }
    }

    function getErrorMessage(error) {
        if (error.code === 4001) {
            return 'User rejected the connection request.';
        }
        return 'An unknown error occurred. Please try again.';
    }
</script>



<div style="margin-top: 20px;">
    <!-- Step 3: Approve Spend -->
    <h2>Step 3: Approve Spend</h2>
    <p>In this step, we need to tell the Lotus Capital Hub token contract that we allow the bridge contract to spend tokens. You should only approve the amount of tokens you wish to transfer via the bridge contract. Please note that this spend approval is permanent, so we recommend adjusting the spend after you successfully transfer the tokens via the bridge contract.</p>
    <p>Here's what you need to know:</p>
    <ul>
        <li>This spend approval is permanent and allows the bridge contract to spend the approved amount of tokens.</li>
        <li>If you want to send a specific amount of tokens, enter that amount in the input field.</li>
        <li>If you wish to increase the approved amount, repeat this step and enter the new amount.</li>
        <li>If you want to lower the approved amount, repeat this step and enter the new, lower amount.</li>
        <li>Once you have successfully transferred the tokens via the bridge contract to Polygon, you can redo this step and set the value to 0 to remove the bridge contract's ability to spend your tokens.</li>
    </ul>
    <form onsubmit="approveSpend(); return false;">
        <label for="tokenAmountInput">Enter the amount of tokens to spend:</label>
        <input type="text" id="tokenAmountInput" style="font-size: 16px; width: 180px;" placeholder="Enter amount" required pattern="[0-9]+">
        <p style="font-size: 12px; color: red;">Please enter a whole number with no decimals or special characters. This may cause the transaction to fail or another unforeseen error.</p>
        <input type="checkbox" id="securityCheckbox" required>
        <label for="securityCheckbox">I understand that I take full responsibility for using this function and understand Lotus Capital Hub is not responsible for anything resulting from my use of this function.</label><br>
        <button type="submit" id="approveButton" style="background-color: white; font-size: 30px; color: grey;" disabled>Approve Spend</button>
    </form>
</div>

<script>
	<!-- Step 3: Approve Spend -->
  	async function approveSpend() {
    try {
      if (typeof window.ethereum === 'undefined') {
        throw new Error('MetaMask is not available. Please install MetaMask.');
      }

      const contractAddress = '0x552f9B7EB8951C138d5B23C785A405C1602A9589';
      const contractAbi = [
	{
		"inputs": [],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Approval",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "approve",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "subtractedValue",
				"type": "uint256"
			}
		],
		"name": "decreaseAllowance",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "addedValue",
				"type": "uint256"
			}
		],
		"name": "increaseAllowance",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "transfer",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Transfer",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "transferFrom",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			}
		],
		"name": "allowance",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "account",
				"type": "address"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "decimals",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "symbol",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "totalSupply",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
];

	  const web3 = new Web3(window.ethereum);
      const contract = new web3.eth.Contract(contractAbi, contractAddress);

      const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
      const userAddress = accounts[0];
      const spender = '0xA1894b6d732B898dD44382f352aF0Ccc75CfAA58';
      const amount = web3.utils.toWei(document.getElementById('tokenAmountInput').value, 'ether');

	  const gasAmount = 50000;

	  const transaction = await contract.methods.approve(spender, amount).send({ from: userAddress, gas: gasAmount });

      console.log('Transaction success receipt:', transaction);

	  // Transaction was successful, you can update the UI or show a success message here
	  document.getElementById('sendFromButton').removeAttribute('disabled');
	  sendFromButton.style.color = 'black';
	  statusField.textContent = "Approval was successful. Please proceed to step 4.";

      // Transaction was successful, you can update the UI or show a success message here
    } catch (error) {
      console.error('Transaction error:', error);
      showError('Transaction error. Please try again.');
    }
  }
  </script>

<div style="margin-top: 20px;">
    <!-- Step 4: Complete SendFrom Function-->
    <h2>Step 4: Complete token transfer from BNB Chain Test Net to Polygon zkEVM Test Net</h2>
	<p>Now it's time to send the tokens from your wallet on BNB Chain Test Net to the exact same wallet address on Polygon zkEVM Test Net. To complete this step, enter the desired token amount to transfer in the input field. Please note that you should only send the exact amount of tokens you approved in Step 3 or less, or the transaction will fail. The input field only accepts numbers, and no other form of characters.</p>
	<p>We have set a fixed gas amount based on our experience of using the transfer, however, we cannot predict fluctuations in the blockchain and the estimates may be wrong or fail due to any other related reason, which is out of our control. You understand clearly on this point. Gas is used by the blockchain, and unused gas will be refunded back to your wallet. You can adjust the gas fees in MetaMask according to your own discretion.</p>
	<p>Lotus Capital Hub has implemented the standard contract v2 presented by Layer Zero Labs and does not profit in any form from you conducting this transaction on the blockchain. In fact, the costs associated with using Layer Zero Labs may be far cheaper than other typical bridges. Layer Zero Labs processes the transaction and may take a percentage of the transaction fees to process your transaction.</p>
	<p>If you need any support with the front end of Lotus Capital Hub, please contact us. However, if you have an issue with your transfer that is marked as successful by Layer Zero Labs, please go to the official Layer Zero Labs Discord server and open a ticket with them.</p>
	<form onsubmit="sendFromA(); return false;">
        <label for="tokenAmountInput">Enter the amount of tokens to transfer:</label>
        <input type="number" id="tokenAmountInputSend" style="font-size: 16px; width: 180px;" placeholder="Enter amount" required min="0" max="approvedAmount">
        <p style="font-size: 12px; color: red;">Please enter a whole number with no decimals or special characters. This may cause the transaction to fail or another unforeseen error.</p>
        <input type="checkbox" id="securityCheckbox" required>
        <label for="securityCheckbox">I understand that I take full responsibility for using this function and understand Lotus Capital Hub is not responsible for anything resulting from my use of this function.</label><br>
        <button type="submit" id="sendFromButton" style="background-color: white; font-size: 30px; color: grey;">Complete sendFrom</button>
    </form>
</div>

<script>



	<!-- Step 4: Complete SendFrom Function-->
	  async function sendFromA() {
		  try {
			if (typeof window.ethereum === 'undefined') {
			  throw new Error('MetaMask is not available. Please install MetaMask.');
			}
	  
			const contractAddress = '0xA1894b6d732B898dD44382f352aF0Ccc75CfAA58';
			const contractAbi = [
		  {
			  "inputs": [
				  
			  {
				  "internalType": "address",
				  "name": "_token",
				  "type": "address"
			  },
			  {
				  "internalType": "uint8",
				  "name": "_sharedDecimals",
				  "type": "uint8"
			  },
			  {
				  "internalType": "address",
				  "name": "_lzEndpoint",
				  "type": "address"
			  }
		  ],
		  "stateMutability": "nonpayable",
		  "type": "constructor"
	  },
	  {
		  "anonymous": false,
		  "inputs": [
			  {
				  "indexed": true,
				  "internalType": "uint16",
				  "name": "_srcChainId",
				  "type": "uint16"
			  },
			  {
				  "indexed": false,
				  "internalType": "bytes",
				  "name": "_srcAddress",
				  "type": "bytes"
			  },
			  {
				  "indexed": false,
				  "internalType": "uint64",
				  "name": "_nonce",
				  "type": "uint64"
			  },
			  {
				  "indexed": false,
				  "internalType": "bytes32",
				  "name": "_hash",
				  "type": "bytes32"
			  }
		  ],
		  "name": "CallOFTReceivedSuccess",
		  "type": "event"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_srcChainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_srcAddress",
				  "type": "bytes"
			  },
			  {
				  "internalType": "uint64",
				  "name": "_nonce",
				  "type": "uint64"
			  },
			  {
				  "internalType": "bytes32",
				  "name": "_from",
				  "type": "bytes32"
			  },
			  {
				  "internalType": "address",
				  "name": "_to",
				  "type": "address"
			  },
			  {
				  "internalType": "uint256",
				  "name": "_amount",
				  "type": "uint256"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_payload",
				  "type": "bytes"
			  },
			  {
				  "internalType": "uint256",
				  "name": "_gasForCall",
				  "type": "uint256"
			  }
		  ],
		  "name": "callOnOFTReceived",
		  "outputs": [],
		  "stateMutability": "nonpayable",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_srcChainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_srcAddress",
				  "type": "bytes"
			  }
		  ],
		  "name": "forceResumeReceive",
		  "outputs": [],
		  "stateMutability": "nonpayable",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_srcChainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_srcAddress",
				  "type": "bytes"
			  },
			  {
				  "internalType": "uint64",
				  "name": "_nonce",
				  "type": "uint64"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_payload",
				  "type": "bytes"
			  }
		  ],
		  "name": "lzReceive",
		  "outputs": [],
		  "stateMutability": "nonpayable",
		  "type": "function"
	  },
	  {
		  "anonymous": false,
		  "inputs": [
			  {
				  "indexed": false,
				  "internalType": "uint16",
				  "name": "_srcChainId",
				  "type": "uint16"
			  },
			  {
				  "indexed": false,
				  "internalType": "bytes",
				  "name": "_srcAddress",
				  "type": "bytes"
			  },
			  {
				  "indexed": false,
				  "internalType": "uint64",
				  "name": "_nonce",
				  "type": "uint64"
			  },
			  {
				  "indexed": false,
				  "internalType": "bytes",
				  "name": "_payload",
				  "type": "bytes"
			  },
			  {
				  "indexed": false,
				  "internalType": "bytes",
				  "name": "_reason",
				  "type": "bytes"
			  }
		  ],
		  "name": "MessageFailed",
		  "type": "event"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_srcChainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_srcAddress",
				  "type": "bytes"
			  },
			  {
				  "internalType": "uint64",
				  "name": "_nonce",
				  "type": "uint64"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_payload",
				  "type": "bytes"
			  }
		  ],
		  "name": "nonblockingLzReceive",
		  "outputs": [],
		  "stateMutability": "nonpayable",
		  "type": "function"
	  },
	  {
		  "anonymous": false,
		  "inputs": [
			  {
				  "indexed": false,
				  "internalType": "address",
				  "name": "_address",
				  "type": "address"
			  }
		  ],
		  "name": "NonContractAddress",
		  "type": "event"
	  },
	  {
		  "anonymous": false,
		  "inputs": [
			  {
				  "indexed": true,
				  "internalType": "address",
				  "name": "previousOwner",
				  "type": "address"
			  },
			  {
				  "indexed": true,
				  "internalType": "address",
				  "name": "newOwner",
				  "type": "address"
			  }
		  ],
		  "name": "OwnershipTransferred",
		  "type": "event"
	  },
	  {
		  "anonymous": false,
		  "inputs": [
			  {
				  "indexed": true,
				  "internalType": "uint16",
				  "name": "_srcChainId",
				  "type": "uint16"
			  },
			  {
				  "indexed": true,
				  "internalType": "address",
				  "name": "_to",
				  "type": "address"
			  },
			  {
				  "indexed": false,
				  "internalType": "uint256",
				  "name": "_amount",
				  "type": "uint256"
			  }
		  ],
		  "name": "ReceiveFromChain",
		  "type": "event"
	  },
	  {
		  "inputs": [],
		  "name": "renounceOwnership",
		  "outputs": [],
		  "stateMutability": "nonpayable",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_srcChainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_srcAddress",
				  "type": "bytes"
			  },
			  {
				  "internalType": "uint64",
				  "name": "_nonce",
				  "type": "uint64"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_payload",
				  "type": "bytes"
			  }
		  ],
		  "name": "retryMessage",
		  "outputs": [],
		  "stateMutability": "payable",
		  "type": "function"
	  },
	  {
		  "anonymous": false,
		  "inputs": [
			  {
				  "indexed": false,
				  "internalType": "uint16",
				  "name": "_srcChainId",
				  "type": "uint16"
			  },
			  {
				  "indexed": false,
				  "internalType": "bytes",
				  "name": "_srcAddress",
				  "type": "bytes"
			  },
			  {
				  "indexed": false,
				  "internalType": "uint64",
				  "name": "_nonce",
				  "type": "uint64"
			  },
			  {
				  "indexed": false,
				  "internalType": "bytes32",
				  "name": "_payloadHash",
				  "type": "bytes32"
			  }
		  ],
		  "name": "RetryMessageSuccess",
		  "type": "event"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "address",
				  "name": "_from",
				  "type": "address"
			  },
			  {
				  "internalType": "uint16",
				  "name": "_dstChainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "bytes32",
				  "name": "_toAddress",
				  "type": "bytes32"
			  },
			  {
				  "internalType": "uint256",
				  "name": "_amount",
				  "type": "uint256"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_payload",
				  "type": "bytes"
			  },
			  {
				  "internalType": "uint64",
				  "name": "_dstGasForCall",
				  "type": "uint64"
			  },
			  {
				  "components": [
					  {
						  "internalType": "address payable",
						  "name": "refundAddress",
						  "type": "address"
					  },
					  {
						  "internalType": "address",
						  "name": "zroPaymentAddress",
						  "type": "address"
					  },
					  {
						  "internalType": "bytes",
						  "name": "adapterParams",
						  "type": "bytes"
					  }
				  ],
				  "internalType": "struct ICommonOFT.LzCallParams",
				  "name": "_callParams",
				  "type": "tuple"
			  }
		  ],
		  "name": "sendAndCall",
		  "outputs": [],
		  "stateMutability": "payable",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "address",
				  "name": "_from",
				  "type": "address"
			  },
			  {
				  "internalType": "uint16",
				  "name": "_dstChainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "bytes32",
				  "name": "_toAddress",
				  "type": "bytes32"
			  },
			  {
				  "internalType": "uint256",
				  "name": "_amount",
				  "type": "uint256"
			  },
			  {
				  "components": [
					  {
						  "internalType": "address payable",
						  "name": "refundAddress",
						  "type": "address"
					  },
					  {
						  "internalType": "address",
						  "name": "zroPaymentAddress",
						  "type": "address"
					  },
					  {
						  "internalType": "bytes",
						  "name": "adapterParams",
						  "type": "bytes"
					  }
				  ],
				  "internalType": "struct ICommonOFT.LzCallParams",
				  "name": "_callParams",
				  "type": "tuple"
			  }
		  ],
		  "name": "sendFrom",
		  "outputs": [],
		  "stateMutability": "payable",
		  "type": "function"
	  },
	  {
		  "anonymous": false,
		  "inputs": [
			  {
				  "indexed": true,
				  "internalType": "uint16",
				  "name": "_dstChainId",
				  "type": "uint16"
			  },
			  {
				  "indexed": true,
				  "internalType": "address",
				  "name": "_from",
				  "type": "address"
			  },
			  {
				  "indexed": true,
				  "internalType": "bytes32",
				  "name": "_toAddress",
				  "type": "bytes32"
			  },
			  {
				  "indexed": false,
				  "internalType": "uint256",
				  "name": "_amount",
				  "type": "uint256"
			  }
		  ],
		  "name": "SendToChain",
		  "type": "event"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_version",
				  "type": "uint16"
			  },
			  {
				  "internalType": "uint16",
				  "name": "_chainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "uint256",
				  "name": "_configType",
				  "type": "uint256"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_config",
				  "type": "bytes"
			  }
		  ],
		  "name": "setConfig",
		  "outputs": [],
		  "stateMutability": "nonpayable",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_dstChainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "uint16",
				  "name": "_packetType",
				  "type": "uint16"
			  },
			  {
				  "internalType": "uint256",
				  "name": "_minGas",
				  "type": "uint256"
			  }
		  ],
		  "name": "setMinDstGas",
		  "outputs": [],
		  "stateMutability": "nonpayable",
		  "type": "function"
	  },
	  {
		  "anonymous": false,
		  "inputs": [
			  {
				  "indexed": false,
				  "internalType": "uint16",
				  "name": "_dstChainId",
				  "type": "uint16"
			  },
			  {
				  "indexed": false,
				  "internalType": "uint16",
				  "name": "_type",
				  "type": "uint16"
			  },
			  {
				  "indexed": false,
				  "internalType": "uint256",
				  "name": "_minDstGas",
				  "type": "uint256"
			  }
		  ],
		  "name": "SetMinDstGas",
		  "type": "event"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_dstChainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "uint256",
				  "name": "_size",
				  "type": "uint256"
			  }
		  ],
		  "name": "setPayloadSizeLimit",
		  "outputs": [],
		  "stateMutability": "nonpayable",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "address",
				  "name": "_precrime",
				  "type": "address"
			  }
		  ],
		  "name": "setPrecrime",
		  "outputs": [],
		  "stateMutability": "nonpayable",
		  "type": "function"
	  },
	  {
		  "anonymous": false,
		  "inputs": [
			  {
				  "indexed": false,
				  "internalType": "address",
				  "name": "precrime",
				  "type": "address"
			  }
		  ],
		  "name": "SetPrecrime",
		  "type": "event"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_version",
				  "type": "uint16"
			  }
		  ],
		  "name": "setReceiveVersion",
		  "outputs": [],
		  "stateMutability": "nonpayable",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_version",
				  "type": "uint16"
			  }
		  ],
		  "name": "setSendVersion",
		  "outputs": [],
		  "stateMutability": "nonpayable",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_remoteChainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_path",
				  "type": "bytes"
			  }
		  ],
		  "name": "setTrustedRemote",
		  "outputs": [],
		  "stateMutability": "nonpayable",
		  "type": "function"
	  },
	  {
		  "anonymous": false,
		  "inputs": [
			  {
				  "indexed": false,
				  "internalType": "uint16",
				  "name": "_remoteChainId",
				  "type": "uint16"
			  },
			  {
				  "indexed": false,
				  "internalType": "bytes",
				  "name": "_path",
				  "type": "bytes"
			  }
		  ],
		  "name": "SetTrustedRemote",
		  "type": "event"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_remoteChainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_remoteAddress",
				  "type": "bytes"
			  }
		  ],
		  "name": "setTrustedRemoteAddress",
		  "outputs": [],
		  "stateMutability": "nonpayable",
		  "type": "function"
	  },
	  {
		  "anonymous": false,
		  "inputs": [
			  {
				  "indexed": false,
				  "internalType": "uint16",
				  "name": "_remoteChainId",
				  "type": "uint16"
			  },
			  {
				  "indexed": false,
				  "internalType": "bytes",
				  "name": "_remoteAddress",
				  "type": "bytes"
			  }
		  ],
		  "name": "SetTrustedRemoteAddress",
		  "type": "event"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "bool",
				  "name": "_useCustomAdapterParams",
				  "type": "bool"
			  }
		  ],
		  "name": "setUseCustomAdapterParams",
		  "outputs": [],
		  "stateMutability": "nonpayable",
		  "type": "function"
	  },
	  {
		  "anonymous": false,
		  "inputs": [
			  {
				  "indexed": false,
				  "internalType": "bool",
				  "name": "_useCustomAdapterParams",
				  "type": "bool"
			  }
		  ],
		  "name": "SetUseCustomAdapterParams",
		  "type": "event"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "address",
				  "name": "newOwner",
				  "type": "address"
			  }
		  ],
		  "name": "transferOwnership",
		  "outputs": [],
		  "stateMutability": "nonpayable",
		  "type": "function"
	  },
	  {
		  "inputs": [],
		  "name": "circulatingSupply",
		  "outputs": [
			  {
				  "internalType": "uint256",
				  "name": "",
				  "type": "uint256"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "",
				  "type": "uint16"
			  },
			  {
				  "internalType": "bytes",
				  "name": "",
				  "type": "bytes"
			  },
			  {
				  "internalType": "uint64",
				  "name": "",
				  "type": "uint64"
			  }
		  ],
		  "name": "creditedPackets",
		  "outputs": [
			  {
				  "internalType": "bool",
				  "name": "",
				  "type": "bool"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [],
		  "name": "DEFAULT_PAYLOAD_SIZE_LIMIT",
		  "outputs": [
			  {
				  "internalType": "uint256",
				  "name": "",
				  "type": "uint256"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_dstChainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "bytes32",
				  "name": "_toAddress",
				  "type": "bytes32"
			  },
			  {
				  "internalType": "uint256",
				  "name": "_amount",
				  "type": "uint256"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_payload",
				  "type": "bytes"
			  },
			  {
				  "internalType": "uint64",
				  "name": "_dstGasForCall",
				  "type": "uint64"
			  },
			  {
				  "internalType": "bool",
				  "name": "_useZro",
				  "type": "bool"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_adapterParams",
				  "type": "bytes"
			  }
		  ],
		  "name": "estimateSendAndCallFee",
		  "outputs": [
			  {
				  "internalType": "uint256",
				  "name": "nativeFee",
				  "type": "uint256"
			  },
			  {
				  "internalType": "uint256",
				  "name": "zroFee",
				  "type": "uint256"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_dstChainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "bytes32",
				  "name": "_toAddress",
				  "type": "bytes32"
			  },
			  {
				  "internalType": "uint256",
				  "name": "_amount",
				  "type": "uint256"
			  },
			  {
				  "internalType": "bool",
				  "name": "_useZro",
				  "type": "bool"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_adapterParams",
				  "type": "bytes"
			  }
		  ],
		  "name": "estimateSendFee",
		  "outputs": [
			  {
				  "internalType": "uint256",
				  "name": "nativeFee",
				  "type": "uint256"
			  },
			  {
				  "internalType": "uint256",
				  "name": "zroFee",
				  "type": "uint256"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "",
				  "type": "uint16"
			  },
			  {
				  "internalType": "bytes",
				  "name": "",
				  "type": "bytes"
			  },
			  {
				  "internalType": "uint64",
				  "name": "",
				  "type": "uint64"
			  }
		  ],
		  "name": "failedMessages",
		  "outputs": [
			  {
				  "internalType": "bytes32",
				  "name": "",
				  "type": "bytes32"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_version",
				  "type": "uint16"
			  },
			  {
				  "internalType": "uint16",
				  "name": "_chainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "address",
				  "name": "",
				  "type": "address"
			  },
			  {
				  "internalType": "uint256",
				  "name": "_configType",
				  "type": "uint256"
			  }
		  ],
		  "name": "getConfig",
		  "outputs": [
			  {
				  "internalType": "bytes",
				  "name": "",
				  "type": "bytes"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_remoteChainId",
				  "type": "uint16"
			  }
		  ],
		  "name": "getTrustedRemoteAddress",
		  "outputs": [
			  {
				  "internalType": "bytes",
				  "name": "",
				  "type": "bytes"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "_srcChainId",
				  "type": "uint16"
			  },
			  {
				  "internalType": "bytes",
				  "name": "_srcAddress",
				  "type": "bytes"
			  }
		  ],
		  "name": "isTrustedRemote",
		  "outputs": [
			  {
				  "internalType": "bool",
				  "name": "",
				  "type": "bool"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [],
		  "name": "lzEndpoint",
		  "outputs": [
			  {
				  "internalType": "contract ILayerZeroEndpoint",
				  "name": "",
				  "type": "address"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "",
				  "type": "uint16"
			  },
			  {
				  "internalType": "uint16",
				  "name": "",
				  "type": "uint16"
			  }
		  ],
		  "name": "minDstGasLookup",
		  "outputs": [
			  {
				  "internalType": "uint256",
				  "name": "",
				  "type": "uint256"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [],
		  "name": "NO_EXTRA_GAS",
		  "outputs": [
			  {
				  "internalType": "uint256",
				  "name": "",
				  "type": "uint256"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [],
		  "name": "outboundAmount",
		  "outputs": [
			  {
				  "internalType": "uint256",
				  "name": "",
				  "type": "uint256"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [],
		  "name": "owner",
		  "outputs": [
			  {
				  "internalType": "address",
				  "name": "",
				  "type": "address"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "",
				  "type": "uint16"
			  }
		  ],
		  "name": "payloadSizeLimitLookup",
		  "outputs": [
			  {
				  "internalType": "uint256",
				  "name": "",
				  "type": "uint256"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [],
		  "name": "precrime",
		  "outputs": [
			  {
				  "internalType": "address",
				  "name": "",
				  "type": "address"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [],
		  "name": "PT_SEND",
		  "outputs": [
			  {
				  "internalType": "uint8",
				  "name": "",
				  "type": "uint8"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [],
		  "name": "PT_SEND_AND_CALL",
		  "outputs": [
			  {
				  "internalType": "uint8",
				  "name": "",
				  "type": "uint8"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [],
		  "name": "sharedDecimals",
		  "outputs": [
			  {
				  "internalType": "uint8",
				  "name": "",
				  "type": "uint8"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "bytes4",
				  "name": "interfaceId",
				  "type": "bytes4"
			  }
		  ],
		  "name": "supportsInterface",
		  "outputs": [
			  {
				  "internalType": "bool",
				  "name": "",
				  "type": "bool"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [],
		  "name": "token",
		  "outputs": [
			  {
				  "internalType": "address",
				  "name": "",
				  "type": "address"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [
			  {
				  "internalType": "uint16",
				  "name": "",
				  "type": "uint16"
			  }
		  ],
		  "name": "trustedRemoteLookup",
		  "outputs": [
			  {
				  "internalType": "bytes",
				  "name": "",
				  "type": "bytes"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  },
	  {
		  "inputs": [],
		  "name": "useCustomAdapterParams",
		  "outputs": [
			  {
				  "internalType": "bool",
				  "name": "",
				  "type": "bool"
			  }
		  ],
		  "stateMutability": "view",
		  "type": "function"
	  }  
						  
		  ];
	  
			// Use the latest version of web3 with the "eth.Contract" method
			const web3 = new Web3(window.ethereum);
			const contract = new web3.eth.Contract(contractAbi, contractAddress);
	  
			const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
			const userAddress = accounts[0];
	  
			const _from = accounts[0];
			const _dstChainId = '10158';
	  
			const _toAddress = ethers.utils.keccak256(accounts[0]);

        // Save the value from the input field to _amount
        const _amount = document.getElementById('tokenAmountInputSend').value;

        console.log('Amount:', _amount);

			const _callParams = [
			  accounts[0],
			  '0x0000000000000000000000000000000000000000',
			  '0x000100000000000000000000000000000000000000000000000000000000000927C0',
			];
	  
			const gasLimit = '350000';
			const gasPriceGwei = '5';
			const gasPriceWei = web3.utils.toWei(gasPriceGwei, 'gwei');
	  
			const transaction = await contract.methods.sendFrom(_from, _dstChainId, _toAddress, _amount, _callParams).send({ from: userAddress, gas: gasLimit, gasPrice: gasPriceWei, value: web3.utils.toWei('0.0019', 'ether') });
	  
			console.log('Transaction receipt:', transaction);
	  
			// Transaction was successful, you can update the UI or show a success message here
		  } catch (error) {
			console.error('Transaction error:', error);
			showError('Transaction error. Please try again.');
		  }
		}
	  
		function showError(message) {
		  alert(message);
		}
  </script>

<script defer>
    window.addEventListener('load', async function () {
        const connectBscButton = document.getElementById('connectBscButton'); // Corrected variable name
        const statusField = document.getElementById('statusField'); // Get the statusField element

        connectBscButton.removeAttribute('disabled');
        connectBscButton.style.color = 'black';

        console.log('Website loaded. Enabling network connect button...');

        // Update the statusField to indicate that the website is loaded
        statusField.textContent = "The website is now loaded. You can begin at Step 1.";
    });
</script>